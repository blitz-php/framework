var ciDebugBar={toolbarContainer:null,toolbar:null,icon:null,init:function(){this.toolbarContainer=document.getElementById("toolbarContainer"),this.toolbar=document.getElementById("debug-bar"),this.icon=document.getElementById("debug-icon"),ciDebugBar.createListeners(),ciDebugBar.setToolbarState(),ciDebugBar.setToolbarPosition(),ciDebugBar.setToolbarTheme(),ciDebugBar.toggleViewsHints(),ciDebugBar.routerLink(),document.getElementById("debug-bar-link").addEventListener("click",ciDebugBar.toggleToolbar,!0),document.getElementById("debug-icon-link").addEventListener("click",ciDebugBar.toggleToolbar,!0);var e=this.toolbar.querySelector('button[data-time="'+localStorage.getItem("debugbar-time")+'"]');ciDebugBar.addClass(e.parentNode.parentNode,"current"),historyLoad=this.toolbar.getElementsByClassName("ci-history-load");for(var t=0;t<historyLoad.length;t++)historyLoad[t].addEventListener("click",(function(){loadDoc(this.getAttribute("data-time"))}),!0);var a=ciDebugBar.readCookie("debug-bar-tab");if(document.getElementById(a)){var r=document.getElementById(a);r.style.display="block",ciDebugBar.addClass(r,"active"),(a=document.querySelector("[data-tab="+a+"]"))&&ciDebugBar.addClass(a.parentNode,"active")}},createListeners:function(){for(var e=[].slice.call(this.toolbar.querySelectorAll(".ci-label a")),t=0;t<e.length;t++)e[t].addEventListener("click",ciDebugBar.showTab,!0);var a=this.toolbar.querySelectorAll("[data-toggle]");for(t=0;t<a.length;t++)a[t].addEventListener("click",ciDebugBar.toggleRows,!0)},showTab:function(){var e=document.getElementById(this.getAttribute("data-tab"));if(e){ciDebugBar.createCookie("debug-bar-tab","",-1);for(var t=e.style.display,a=document.querySelectorAll("#debug-bar .tab"),r=0;r<a.length;r++)a[r].style.display="none";var o=document.querySelectorAll("#debug-bar .ci-label");for(r=0;r<o.length;r++)ciDebugBar.removeClass(o[r],"active");"block"!=t&&(e.style.display="block",ciDebugBar.addClass(this.parentNode,"active"),ciDebugBar.createCookie("debug-bar-tab",this.getAttribute("data-tab"),365))}},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},toggleRows:function(e){if(e.target){let t=e.target.closest("tr"),a=document.getElementById(t.getAttribute("data-toggle"));a.style.display="none"===a.style.display?"table-row":"none"}},toggleDataTable:function(e){"string"==typeof e&&(e=document.getElementById(e+"_table")),e&&(e.style.display="none"===e.style.display?"block":"none")},toggleChildRows:function(e){"string"==typeof e&&(par=document.getElementById(e+"_parent"),e=document.getElementById(e+"_children")),par&&e&&(e.style.display="none"===e.style.display?"":"none",par.classList.toggle("timeline-parent-open"))},toggleToolbar:function(){var e="none"!=ciDebugBar.toolbar.style.display;ciDebugBar.icon.style.display=1==e?"inline-block":"none",ciDebugBar.toolbar.style.display=0==e?"inline-block":"none",ciDebugBar.createCookie("debug-bar-state","",-1),ciDebugBar.createCookie("debug-bar-state",1==e?"minimized":"open",365)},setToolbarState:function(){var e=ciDebugBar.readCookie("debug-bar-state");ciDebugBar.icon.style.display="open"!=e?"inline-block":"none",ciDebugBar.toolbar.style.display="open"==e?"inline-block":"none"},toggleViewsHints:function(){if(localStorage.getItem("debugbar-time")!=localStorage.getItem("debugbar-time-new"))return void(document.querySelector('a[data-tab="ci-views"]').href="#");var e=[],t=[],a=function(e,t){return null===e.parentNode?null:e.parentNode!==t?a(e.parentNode,t):e};const r=["NOSCRIPT","SCRIPT","STYLE"],o=["HTML","BODY","HEAD"];var i=function(e,t){if(-1!==o.indexOf(e.nodeName)){for(var a=0;a<document.body.children.length;++a){var i=t?document.body.children.length-(a+1):a,n=document.body.children[i];if(-1===r.indexOf(n.nodeName))return[n,t]}return null}for(;null!==e&&-1!==r.indexOf(e.nodeName);)e=t?e.previousElementSibling:e.nextElementSibling;return null===e?null:[e,t]},n=function(e){if(e){if(null!==e.nextElementSibling)return i(e.nextElementSibling,!1)||i(e.previousElementSibling,!0);if(null!==e.previousElementSibling)return i(e.previousElementSibling,!0)}return null};function l(){for(var o in t=function(){for(var e=[],t=[],a=document.evaluate("//comment()[starts-with(., ' DEBUG-VIEW')]",document,null,XPathResult.ANY_TYPE,null),r=a.iterateNext();r;)e.push(r),r=a.iterateNext();for(var o=0;o<e.length;++o){var i=e[o].nodeValue.substring(18,e[o].nodeValue.length-1);"S"===e[o].nodeValue[12]?t[i]=[e[o],null]:t[i]&&(t[i][1]=e[o])}return t}(),t){var i=n(t[o][0]),l=n(t[o][1]);if(null!==i&&null!==l){var d=a(l[0],i[0].parentNode);if(null===d){if(null===(d=a(i[0],l[0].parentNode)))continue;i[0]=d}else l[0]=d;var u,b,s=document.createElement("div"),g=document.createElement("div"),m=i[0].parentNode.childNodes,h=i[0].parentNode;s.classList.add("debug-view"),s.classList.add("show-view"),g.classList.add("debug-view-path"),g.innerText=o,s.appendChild(g);for(var p=0;p<m.length;++p)if(m[p]===t[o][1]||m[p]===t[o][0]||m[p]===i[0]){u=p,m[p]===t[o][0]&&u++;break}i[1]&&u++;for(p=u;p<m.length;++p)if(m[p]===l[0])b=p;else if(m[p]===t[o][1]){b=p;break}var f=b-u;l[1]&&f++;for(p=0;p<f;++p)-1===r.indexOf(m[u])?s.appendChild(m[u]):u++;e.push(h.insertBefore(s,m[u]))}}ciDebugBar.createCookie("debug-view","show",365),ciDebugBar.addClass(c,"active")}var c=document.querySelector("[data-tab=ci-views]");c&&(c.parentNode.onclick=function(){ciDebugBar.readCookie("debug-view")?function(){for(var t=0;t<e.length;++t){for(var a,r=0;r<e[t].parentNode.childNodes.length;++r)if(e[t].parentNode.childNodes[r]===e[t]){a=r;break}for(;1!==e[t].childNodes.length;)e[t].parentNode.insertBefore(e[t].childNodes[1],e[t].parentNode.childNodes[a].nextSibling),a++;e[t].parentNode.removeChild(e[t])}e.length=0,ciDebugBar.createCookie("debug-view","",-1),ciDebugBar.removeClass(c,"active")}():l()},ciDebugBar.readCookie("debug-view")&&l())},setToolbarPosition:function(){var e=this.toolbar.querySelector("#toolbar-position");"top"===ciDebugBar.readCookie("debug-bar-position")&&(ciDebugBar.addClass(ciDebugBar.icon,"fixed-top"),ciDebugBar.addClass(ciDebugBar.toolbar,"fixed-top")),e.addEventListener("click",(function(){var e=ciDebugBar.readCookie("debug-bar-position");ciDebugBar.createCookie("debug-bar-position","",-1),e&&"bottom"!==e?(ciDebugBar.createCookie("debug-bar-position","bottom",365),ciDebugBar.removeClass(ciDebugBar.icon,"fixed-top"),ciDebugBar.removeClass(ciDebugBar.toolbar,"fixed-top")):(ciDebugBar.createCookie("debug-bar-position","top",365),ciDebugBar.addClass(ciDebugBar.icon,"fixed-top"),ciDebugBar.addClass(ciDebugBar.toolbar,"fixed-top"))}),!0)},setToolbarTheme:function(){var e=this.toolbar.querySelector("#toolbar-theme");window.matchMedia("(prefers-color-scheme: dark)").matches,window.matchMedia("(prefers-color-scheme: light)").matches;"dark"===ciDebugBar.readCookie("debug-bar-theme")?(ciDebugBar.removeClass(ciDebugBar.toolbarContainer,"light"),ciDebugBar.addClass(ciDebugBar.toolbarContainer,"dark")):"light"===ciDebugBar.readCookie("debug-bar-theme")&&(ciDebugBar.removeClass(ciDebugBar.toolbarContainer,"dark"),ciDebugBar.addClass(ciDebugBar.toolbarContainer,"light")),e.addEventListener("click",(function(){var e=ciDebugBar.readCookie("debug-bar-theme");!e&&window.matchMedia("(prefers-color-scheme: dark)").matches||"dark"===e?(ciDebugBar.createCookie("debug-bar-theme","light",365),ciDebugBar.removeClass(ciDebugBar.toolbarContainer,"dark"),ciDebugBar.addClass(ciDebugBar.toolbarContainer,"light")):(ciDebugBar.createCookie("debug-bar-theme","dark",365),ciDebugBar.removeClass(ciDebugBar.toolbarContainer,"light"),ciDebugBar.addClass(ciDebugBar.toolbarContainer,"dark"))}),!0)},createCookie:function(e,t,a){if(a){var r=new Date;r.setTime(r.getTime()+24*a*60*60*1e3);var o="; expires="+r.toGMTString()}else o="";document.cookie=e+"="+t+o+"; path=/; samesite=Lax"},readCookie:function(e){for(var t=e+"=",a=document.cookie.split(";"),r=0;r<a.length;r++){for(var o=a[r];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null},trimSlash:function(e){return e.replace(/^\/|\/$/g,"")},routerLink:function(){for(var e,t,a=this.toolbar.querySelectorAll('td[data-debugbar-route="GET"]'),r=/\((?:[^)(]+|\((?:[^)(]+|\([^)(]*\))*\))*\)/,o=0;o<a.length;o++)e=a[o],/\/\(.+?\)/.test(a[o].innerText)?e.innerHTML="<div>"+e.innerText+'</div><form data-debugbar-route-tpl="'+ciDebugBar.trimSlash(e.innerText.replace(r,"?"))+'">'+e.innerText.replace(r,'<input type="text" placeholder="$1">')+'<input type="submit" value="Go" style="margin-left: 4px;"></form>':(e.style="cursor: pointer;",e.setAttribute("title",location.origin+"/"+ciDebugBar.trimSlash(e.innerText)),e.addEventListener("click",(function(e){t=location.origin+"/"+ciDebugBar.trimSlash(e.target.innerText),window.open(t,"_blank").location})));a=this.toolbar.querySelectorAll('td[data-debugbar-route="GET"] form');for(o=0;o<a.length;o++)(e=a[o]).addEventListener("submit",(function(e){e.preventDefault();for(var a=[],r=0,o=e.target.querySelectorAll("input[type=text]"),i=e.target.getAttribute("data-debugbar-route-tpl"),n=0;n<o.length;n++)o[n].value.length>0&&a.push(o[n].value);a.length>0&&(t=location.origin+"/"+i.replace(/\?/g,(function(){return a[r++]})),window.open(t,"_blank").location)}))}};